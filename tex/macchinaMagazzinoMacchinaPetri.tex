\begin{figure}[!h]
  \centering
  \begin{tikzpicture}[node distance=1.3cm,>=stealth',bend angle=45,auto]

  \tikzstyle{place}=[circle,thick,draw=blue!75,fill=blue!20,minimum size=6mm]
  \tikzstyle{red place}=[place,draw=red!75,fill=red!20]
  \tikzstyle{transition}=[rectangle,thick,draw=black!75,
  			  fill=black!20,minimum size=4mm]

  \tikzstyle{every label}=[red]
  \begin{scope}
  % MACCHINA
  \node [place,label=above:$P_{i_1}$] (pi1) {};
  \node [place,label=left:$P_{w_1}$] (pw1) [below left of=pi1,yshift=-10mm] {};
  \node [place,label=right:$P_{b_1}$] (pb1) [below right of=pi1,yshift=-10mm] {};

  \node [place,label=above:$P_{i_2}$] (pi2) [xshift=6cm]{};
  \node [place,label=left:$P_{w_2}$] (pw2) [below left of=pi2,yshift=-10mm] {};
  \node [place,label=right:$P_{b_2}$] (pb2) [below right
    of=pi2,yshift=-10mm] {};

  \node [place,label=above:$P_{m_1}$] (pm1) [xshift=3cm]{};
  \node [place,label=below:$P_{m_2}$] (pm2) [below of=pm1,yshift=-5mm]{};
        
  \node [transition,label=left:$t_{11}$] (t11) [below left of=pi1]{}
  edge [pre, bend left] (pi1)
  edge [post] (pw1);

  \node [transition,label=below:$t_{12}$] (t12) [below of=pi1,yshift=-15mm] {}
  edge [pre, bend left] (pw1)
  edge [post, bend right] (pb1);

  \node [transition] (tm1) [below left of=pm1]{}
  edge [post, bend left] (pm1)
  edge [pre, bend right] (pm2);
  
  \node [transition,label=right:$t_{13}$] (t13) [below right of=pi1] {}
  edge [pre] (pb1)
  edge [post, bend right] (pi1);
  \end{scope}

  \begin{scope}[xshift=3cm]
  % MACCHINA
    \node [transition,label=left:$t_{21}$] (t21) [below left of=pi2]{}
    edge [pre, bend left] (pi2)
    edge [post] (pw2);
    
  \node [transition] (tm2) [below right of=pm1] {}
  edge [post, bend left] (pm2)
  edge [pre, bend right] (pm1);
  \end{scope}
  
  \begin{scope}[xshift=6cm]
    \node [transition,label=below:$t_{22}$] (t22) [below of=pi2,yshift=-15mm] {}
    edge [pre, bend left] (pw2)
    edge [post, bend right] (pb2);
    
    \node [transition,label=left:$t_{23}$] (t23) [below right of=pi2] {}
    edge [pre] (pb2)
    edge [post, bend right] (pi2);
  \end{scope}

  \end{tikzpicture}
  \caption{Macchina - Magazzino - Macchina}
  \label{fig:macchinaMagazzinoMacchinaPetri}
\end{figure}
